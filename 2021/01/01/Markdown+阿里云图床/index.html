<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="春立复冬至，青丝即白雪。"><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>Markdown + 阿里云图床 | 谢欣欣已经长大</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script></head><link rel="stylesheet" type="text/css" href="/plugins/prettify/doxy.css"><script type="text/javascript" src="/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">谢欣欣已经长大</a></h1></div><p class="m-desc">立春复冬至, 青丝即白雪。</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/archives/">归档</a></li><li><span class="dot">●</span><a href="/categories/">分类</a></li><li><span class="dot">●</span><a href="/tags/">标签</a></li><li><span class="dot">●</span><a href="/about/">关于</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="搜索" onfocus="if(this.value=='搜索'){this.value='';}" onblur="if(this.value==''){this.value='搜索';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">Markdown + 阿里云图床</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/2021/01/01/Markdown+阿里云图床/">2021-01-01</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/categories/记录/">记录</a></span></div></div><div class="p-content"><p>Markdown 文档与多工具使用 AliyunOss 图床。</p>
<a id="more"></a>
<p>引言：虽然我一直在用 Snipaste，但我主要使用截图后贴图功能，可以很方便进行对比查看，其编辑样式也比较好看。但是 Snipaste 不支持滚动截图，而且编辑样式没有阴影。其实滚动截图倒是不常用，而且 FSCapture 就足够。只是我一直想找一个能截图自带阴影的截图工具。用了 Winsnap，感觉阴影感一般。似乎 Ashampoo Snap 也可以，但没深入使用。Snagit 编辑功能比较强大，就是太笨重。最后选择了 ShareX，不仅可以添加自定义阴影，还有圆角等图像效果，最强的还是有截图上传等众多功能。另外用了一下截图后贴图的 Setuna，不好用。体验了无边框的图片浏览器 Vieas 和 MassiGra，都还不错，不过最后还是回归了 Honeyview。当然还有很多优秀的截图看图工具，在此只是选择了符合自己需求的而已。</p>
<h1><span id="aliyunoss配置图床">AliyunOss配置图床</span></h1><p>注册并登录，在<a href="https://www.aliyun.com/product/oss" target="_blank" rel="noopener">阿里云对象储存OSS</a>页面选择 <strong>折扣套餐</strong>，如下图购买一年只需要 9 元：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609587517.png"></div> 

<p>购买完成后回到首页，点击右上方的控制台，进入<a href="https://homenew.console.aliyun.com/home/scene/Operation" target="_blank" rel="noopener">个人控制台</a>，在左侧找到 <code>对象储存OSS</code> 并点击进入：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609587596.png"></div>

<p>选择左侧 <code>Bucket列表 -&gt; 创建Bucket</code>，弹出的 <code>OSS版本控制</code> 是否开通看个人选择，然后进行参数填写。注意 <code>读写权限</code> 一项要选择 <code>公共读</code>，然后点击确定进行创建：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609587897.png" width="500"></div> 

<p>创建成功后鼠标放置在左上角头像上，在弹出的窗口中选择 <code>访问控制</code>:</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609588029.png" width="250"></div> 

<p>选择左侧 <code>用户 -&gt; 创建用户</code>，然后填写参数，勾选编程访问：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609590844.png" width="600"></div>

<p>复制显示的 <code>keyid</code> 和 <code>keySecret</code> ，以下各种配置都需要使用。可以先保存为 TXT 文件，关闭后不再显示，若遗失点击进入用户可以重新创建：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609594313.png" width="600"></div>

<p>创建用户后选择用户添加权限，勾选 <code>AliyunOSSFullAccess</code> 后点击确定：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609593685.png" width="600"></div>

<p>创建到此就完成了，可以在 Bucket 创建文件夹放置文件。</p>
<h1><span id="typorapicgo阿里云图床">Typora+PicGo+阿里云图床</span></h1><p>其实首先我是在接触 MD 语法，插入图片的时候想这个问题的。因为手机上我使用<strong>纯纯写作</strong>等支持 MD 语法的 APP 进行记录，考虑很多 APP 对于图片的备份都不太友好，因此选择了<strong>阿里云对象储存</strong>作为图床，使用<strong>咕咚云图</strong>作为上传到图床的媒介，可以很方便地上传并生成插入链接并复制到剪切板。于是在 PC 端使用 Typora + PicGo + 阿里云图床的方式，直接拖拽图片进 Typora 自动上传到阿里云图床。</p>
<p>Typora 内有三种配置 PicGo 的方式，由于我之前已经下载了 <a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noopener">PicGo</a>，因此这里我选择 PicGo(app)： </p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/PicGo/image-20210101174003426.png"></div>

<p><code>插入图片时</code>选项可以勾选前两个，也可以只勾选第一个。勾选第二个的话，同样的图片，你如果使用第二次，它也会上传覆盖。但是如果是其他地方的网络图片，就可以上传到你自己的图床。</p>
<p>再在 PicGo 上进行阿里云图床配置 (阿里云图床设置以及其他图床配置直接搜索即有相关内容)：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609518301.png"></div>

<p>详细参数设置参考：<a href="https://zhuanlan.zhihu.com/p/63557477" target="_blank" rel="noopener">阿里云 oss 搭建图床以及使用 PicGO 上传图片到图床</a>。</p>
<p>设置完成后直接将图片拖曳或者粘贴到 Typora 即可。</p>
<p>也可以选择 PicGo-Core (command line)，其与 PicGo(app) 区别如下：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-03_1609665925.png"></div>

<p>机翻过来就是：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-03_1609665988.png"></div>

<p>相比之下还是选择 PicGo-Core (command line) 更好，其配置也很简单，参考 <a href="https://zhuanlan.zhihu.com/p/138878534" target="_blank" rel="noopener">最强 markdown 编辑器 typora 图床教程 - 阿里云版</a> 即可。</p>
<p>写到这里的时候我又重新改成第二种方式了，因为我属实不喜欢 PicGo 一直后台运行。</p>
<h1><span id="sharex阿里云图床">Sharex+阿里云图床</span></h1><p>首先设置截图命名规则。以下是我截图文件命令规则：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/PicGo/image-20210101180925644.png"></div>

<p>根据 <a href="https://help.aliyun.com/document_detail/179388.html?spm=a2c4g.11186623.2.17.621b4a30CH60ve#concept-1937458" target="_blank" rel="noopener">ossutil 本地上传文件</a>、<a href="https://help.aliyun.com/document_detail/120075.html?spm=a2c4g.11186623.4.1.1ac260d4nFiIdf" target="_blank" rel="noopener">ossutil 下载及配置地址</a> 下载并配置好 ossutil 参数。</p>
<p>选择合适的地方(例如 ossutil 文件夹)新建 bat 文件，内容填写如下：</p>
<pre><code class="bat">@ECHO OFF
::获取传入参数input赋值给para1,此参数由sharex生成,位于sharex所在文件夹内,
::例:&quot;D:\Install\Portable\ShareX\ShareX\Screenshots\2021-01\LYKISUN_2021-01-01_1609499598.png&quot;
Set para1=%1
::将input参数的&quot;替换为空,即去除双引号并赋值给p1
set p1=%para1:&quot;=%
::获取路径最后的图片第55位至倒数第1位,即图片名称赋值给p2。不同路径注意修改
set p2=%para1:~55,-1%
::获取截图所在目录赋值给p3。不同路径注意修改
set p3=%para1:~1,54%
::运行命令:1.切换至ossutil64所在目录;2.上传阿里云命令;3.将md表达式输出至剪切板，注意我的图片是储存在Bucket的ossutil文件夹中;4.退出，隐藏窗口时必须加上才能完成命令。不同命令用&amp;&amp;连接
cmd /k &quot;cd /d D:\Install\ForCode\ossutil64 &amp;&amp; ossutil64 cp %p1% oss://kisun-pic/ossutil/ &amp;&amp; echo ![%p2%](https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/%p2%) | clip &amp;&amp; exit&quot;
</code></pre>
<p>MarkDown 文档中以 <code>![]()</code> 方式插入如图片不支持大小和位置修改，但是 MD 支持 Html ，可以使用以下格式控制图片大小和左右居中位置：</p>
<pre><code class="html">&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;path&quot; width=&quot;300&quot; height=&quot;300&quot; alt=&quot;name&quot;/&gt;&lt;/div&gt;
</code></pre>
<p>因此上述 Bat 文件中最后的命令也可以修改为：</p>
<pre><code class="bat">@ECHO OFF
set para1=%1
set p1=%para1:&quot;=%
set p2=%para1:~37,-1% ::由于我修改了图片保存路径，因此这里以及下方改变了参数
set p3=%para1:~1,36%
cmd /k &quot;cd /d D:\Install\ForCode\ossutil64 &amp;&amp; ossutil64 cp %p1% oss://kisun-pic/ossutil/ &amp;&amp; exit&quot;
set/p=&quot;&lt;div align=center&gt;&lt;img src=&quot;https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/%p2%&quot; width=&quot;600&quot; height=&quot;300&quot;&gt;&lt;/div&gt;&quot;&lt;nul | clip
</code></pre>
<p>缺点就是图片大小需要自己调整，不然直接需要删除 width 和 height 两个参数，因此无特殊要求的话，用第一种方式就可以了。不过感觉以 Html 方式插入的图片显示更友好。</p>
<p>然后打开 sharex 根据下图配置：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/PicGo/image-20210101174314604.png"></div>

<p>然后设置截图后动作：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609526876.png"></div>

<p>勾选<strong>删除本地文件</strong>可以在执行动作后删除本地文件。</p>
<p>最后进行快捷键设置。进行截图后就会运行 Bat 文件将截图上传到阿里云图床的 ossutil 文件夹，并将插入 md 的链接格式自动输出到剪切板，然后直接在 MD 文件中粘贴即可：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-01_1609500851.png"></div><br>当然，如果你第一步使用 Typora 设置了 PicGo，你也可以不必设置 ShareX，直接勾选截图后动作里面的<strong>复制到剪切板</strong>，然后直接在 Typora 里面粘贴即可，Typora 会运行 PicGo 自动上传。当然，ShareX 还支持相当多的其他上传工具，体验一下就知道其强大了。自定义上传器设置需要使用阿里云oss API，没有找到相关教程，整不明白，于是放弃。<br><br># VSCode+PicGo+阿里云图床<br><br>使用 VSCode 不用插件就能编辑和预览 MD 文件，也可以安装 <code>Markdown All in One</code>、<code>Markdown Preview Enhanced</code>、<code>Maridown pdf</code> 等插件使用更加丰富的功能。要使用图床上传图片可以安装 <code>PicGo</code> 插件。<br><br>在 VsCode 搜索并安装 PicGo 插件，在插件配置处按如下配置：<br><br><div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609595409.png" width="600"></div>

<p>其中 <code>Area</code> 和 <code>Custom Url</code> 要根据自己创建 Bucket 时选择的地区修改。</p>
<p>修改 <code>Pic Bed:Current</code> 为 <code>aliyun</code>：</p>
<div align="center"><img src="https://kisun-pic.oss-cn-shenzhen.aliyuncs.com/ossutil/LYKISUN_2021-01-02_1609595296.png" width="600"></div>

<p>当然喜欢使用 Sublime Text 编辑器的话也能配置 MD 编辑和实时预览，但是预览需要使用浏览器这一点我不太喜欢，因此没有选择我最常用的 ST3 来编辑 MD 文件。</p>
<hr>
<p><em>参考链接</em></p>
<p><a href="https://zhuanlan.zhihu.com/p/63557477" target="_blank" rel="noopener">阿里云 oss 搭建图床以及使用 PicGO 上传图片到图床</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/138878534" target="_blank" rel="noopener">最强 markdown 编辑器 typora 图床教程 - 阿里云版</a></p>
<p><a href="https://blog.csdn.net/qq_35621494/article/details/106431899" target="_blank" rel="noopener">VSCode+PicGo+AliyunOss 搭建 Markdown 图床</a></p>
<p><a href="https://support.typora.io/Upload-Image/#picgo-core-command-line-opensource" target="_blank" rel="noopener">Upload Images</a></p>
<p><a href="https://help.aliyun.com/product/31815.html?spm=a2c4g.11186623.6.540.1ac260d4XJTcLr" target="_blank" rel="noopener">对象存储 OSS</a></p>
<p><a href="https://help.aliyun.com/document_detail/120075.html?spm=a2c4g.11186623.4.1.1ac260d4nFiIdf" target="_blank" rel="noopener">命令行工具 ossutil</a></p>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">本文作者：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">长大的谢星星</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">本文链接：</span><span class="p-copytight-value"><a href="/2021/01/01/Markdown+阿里云图床/">/2021/01/01/Markdown+阿里云图床/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">版权声明：</span><span class="p-copytight-value">本博客所有文章除特殊声明外，均采用<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>许可协议。转载请注明出处 <a href>长大的谢星星的博客</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tags"></i><a href="/tags/Markdown/">Markdown</a><a href="/tags/AliyunOSS/">AliyunOSS</a><a href="/tags/Typora/">Typora</a><a href="/tags/PicGo/">PicGo</a><a href="/tags/ShareX/">ShareX</a><a href="/tags/VSCode/">VSCode</a></span></div><aside id="toc"><div class="toc-title">目录</div><nav><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">1.</span> <span class="toc-text">AliyunOss配置图床</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">2.</span> <span class="toc-text">Typora+PicGo+阿里云图床</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">3.</span> <span class="toc-text">Sharex+阿里云图床</span></a></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/2021/01/06/jsDelivr+Github搭建CDN图床/">&lt; jsDelivr+Github搭建CDN图床</a><a class="next" href="/2020/12/20/CI部署Hexo博客/">自动部署 Hexo 静态博客 &gt;</a></div></section><footer><p>Copyright © 2016 - 2021 <a href="/." rel="nofollow">谢欣欣已经长大</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br>Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/js/search.js"></script><script type="text/javascript" src="/js/top.js"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script></body></html>